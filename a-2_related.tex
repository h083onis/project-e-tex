\section*{A-2. 関連研究}

\subsection*{2.1 BLE\ (Bluetooth Low Energy)}
BLE（Bluetooth Low Energy）は，Bluetooth規格の一部であり，低消費電力での通信を目的としている．主にセンサーデバイスやウェアラブル機器，IoTデバイスに利用され，短距離無線通信を効率的に行うことが可能である．従来のBluetooth Classicと比較して消費電力が非常に少なく，バッテリー駆動のデバイスに適している．また，BLEはAdvertisingとScaningの2つのモードを利用して通信を行う．Advertisingは，デバイスが周期的に信号を送信するモードであり，Scaningは，信号を受信し解析するモードである．これにより，BLEは位置情報の測定やデバイスの存在検知に活用されている．

\subsection*{2.2 RSSI（Received Signal Strength Indicator）とMACアドレス}
RSSI（Received Signal Strength Indicator）は，受信信号強度を示す指標であり，無線通信において受信側のデバイスが測定する信号の強度を示す値である．一般に，RSSIは負のdBm（デシベルミリワット）単位で表され，値が0に近いほど信号が強く，負の値が大きくなるほど信号が弱いことを意味する．

RSSIは，無線通信の品質評価や通信経路の選択，位置推定など，さまざまな用途で利用される．特に位置推定では，複数のアクセスポイントや基地局からのRSSI値を用いて，電波の減衰特性に基づいた推定を行う手法が一般的である．RSSIの測定は追加のハードウェアを必要とせず，ほとんどの無線通信モジュールが標準的に提供するため，位置情報の取得においてコスト効率の良い手法とされている．

しかし，RSSIの測定値は周囲の環境要因に大きく影響される．電波の反射，回折，散乱，遮蔽物の存在などが測定値に誤差を生じさせる．特に屋内環境ではマルチパス伝播の影響が顕著であり，精度の低下を引き起こす．また，異なるデバイスやチップセットによってRSSIの測定精度や値の補正方法が異なるため，環境に依存しない正確な推定を行うためには，適切なキャリブレーションやフィルタリングが必要となる．


MACアドレス（Media Access Control Address）は，ネットワークインターフェースに一意に割り当てられた識別子であり，ネットワーク層でのデバイス識別や通信制御に用いられる．MACアドレスは通常48ビットの長さを持ち，12桁の16進数（例：\texttt{00:1A:2B:3C:4D:5E}）で表記される．MACアドレスはOSI参照モデルのデータリンク層において使用され，同一ネットワーク内での通信を確立する際の基本的な識別子として機能する．

MACアドレスは物理的にネットワーク機器に埋め込まれており，通常はデバイスの製造時に割り当てられる．最初の24ビットは製造者識別子（Organizationally Unique Identifier, OUI）として定められ，特定のメーカーに割り当てられる．残りの24ビットはメーカーが独自に管理し，各デバイスに一意となるよう設定される．この仕組みにより，世界中の全てのネットワークデバイスに対して一意のMACアドレスを付与することが可能となっている．

\subsection*{2.3 Raspberry Pi 4}
Raspberry Pi 4は，シングルボードコンピュータであり，BLE通信の受信やデータ処理を行うためのデバイスとして利用することができる．ARM Cortex-A72プロセッサと最大8GBのRAMを搭載し，小型ながら高性能な処理が可能である．BLE受信モジュールを搭載しており，周囲のBLEビーコンやデバイスをスキャンして信号強度指標（RSSI）やMACアドレスなどの情報を取得できる．
BLEスキャンは，Raspberry Pi 4に搭載されたBluetooth 5.0対応モジュールを用いて行われる．Linux環境では，hcitoolやbluetoothctlといったコマンドラインツールを使用することで，BLEデバイスを検出し，一定間隔でRSSI値を取得することが可能である．
取得したRSSI値は，距離推定や位置推定の指標として使用される．
また，Raspberry Pi 4は低コストで簡単に配置できるため，複数台を使用した分散型のデータ収集環境を構築することも容易である．各デバイスが収集したデータをネットワークを介して集約・統合し，混雑度推定モデルの入力として利用できる．分散型環境では，各Raspberry Pi 4が独立してデータ収集を行うことで，リアルタイム性を維持しつつ効率的な処理を実現できる．

\subsection*{2.4 回帰モデル}
回帰モデルは，入力変数と出力変数の間の関係を数理的に表現するための統計的手法である．特に，ある連続的な目的変数を予測することを目的とした場合に広く利用される．回帰モデルは，データの分布や傾向を捉え，未知のデータに対して予測を行うために用いられる．

一般的に，回帰モデルは次の形式で表される．

\begin{equation}
	y = f(\mathbf{x}) + \epsilon
\end{equation}

ここで，$y$ は目的変数（従属変数）であり，$\mathbf{x} = (x_1, x_2, \ldots, x_p)$ は $p$ 個の説明変数（独立変数）のベクトルを表す．$f(\mathbf{x})$ は説明変数と目的変数の関係を表す未知の関数であり，$\epsilon$ は誤差項である．誤差項は観測誤差やモデル化の不確実性を表し，通常は平均0，分散$\sigma^2$の正規分布に従うと仮定される．
\begin{itemize}
	\item \textbf{単回帰モデル}
	
	最も基本的な回帰モデルとして，単回帰モデルが挙げられる．単回帰モデルでは，1つの説明変数を用いて目的変数を予測する．
	
	\begin{equation}
		y = \beta_0 + \beta_1 x + \epsilon
	\end{equation}
	
	ここで，$x$ は説明変数，$y$ は目的変数である．$\beta_0$ は切片（定数項）であり，説明変数が0のときの目的変数の期待値を表す．$\beta_1$ は回帰係数（傾き）で，説明変数が1単位増加したときに目的変数がどの程度変化するかを示す．$\epsilon$ は誤差項であり，観測値とモデルの予測値の差を含む．
	
	\item \textbf{重回帰モデル}
	
	複数の説明変数を用いる場合，重回帰モデルが使用される．重回帰モデルは次のように表される．
	
	\begin{equation}
		y = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \cdots + \beta_p x_p + \epsilon
	\end{equation}
	
	ここで，$x_1, x_2, \ldots, x_p$ は $p$ 個の説明変数，$\beta_0$ は切片，$\beta_1, \beta_2, \ldots, \beta_p$ は各説明変数に対する回帰係数である．誤差項 $\epsilon$ は，単回帰モデルと同様に観測誤差やモデル化の不確実性を表す．
	
	\item \textbf{最小二乗法}
	
	回帰モデルの係数 $\beta_0, \beta_1, \ldots, \beta_p$ を推定するためには，一般に最小二乗法が用いられる．最小二乗法では，観測値とモデルの予測値の差の二乗和を最小化することを目的とする．損失関数（残差平方和）は次のように定義される．
	
	\begin{equation}
		L(\beta_0, \beta_1, \ldots, \beta_p) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 = \sum_{i=1}^{n} (y_i - \beta_0 - \sum_{j=1}^{p} \beta_j x_{ij})^2
	\end{equation}
	
	ここで，$n$ はサンプルサイズ，$y_i$ は $i$ 番目の観測値，$\hat{y}_i$ はモデルによって予測された $i$ 番目の値である．$x_{ij}$ は $i$ 番目のサンプルの $j$ 番目の説明変数を示す．損失関数 $L$ を最小化することで，最適な回帰係数を求めることができる．
	
	最小二乗法の解は以下の正規方程式を解くことで得られる．
	
	\begin{equation}
		(\mathbf{X}^T \mathbf{X}) \mathbf{\beta} = \mathbf{X}^T \mathbf{y}
	\end{equation}
	
	ここで，$\mathbf{X}$ は $n \times (p+1)$ 次元の説明変数のデザイン行列であり，$\mathbf{\beta}$ は $(p+1)$ 次元の回帰係数のベクトル，$\mathbf{y}$ は $n$ 次元の目的変数のベクトルを表す．$\mathbf{X}^T$ は $\mathbf{X}$ の転置行列である．この方程式を解くことで，最小二乗推定量を得ることができる．
	
	回帰モデルはこのようにして，観測データから入力と出力の関係を定量的に表現し，未知の入力に対する出力を推定するための有効な手法となる．
\end{itemize}

\subsection*{2.5 決定木とそのモデル}
決定木は，分類および回帰のための機械学習モデルの一つであり，データを階層的に分割することで予測を行う手法である．木構造を持つこのモデルは，根ノードから始まり，内部ノードで特徴量に基づいた条件分岐を行い，最終的に葉ノードに到達して予測結果を出力する．

決定木は直感的に理解しやすく，可視化が容易であるため，特徴量の重要度を評価する際にも有用である．特に，非線形な関係や複雑なデータに対しても効果的に学習を行うことができる．

決定木における分割は，各ノードにおいて目的変数と特徴量の関係を最もよく説明できる条件を選択することで行われる．分類問題の場合はジニ不純度 (Gini Impurity) やエントロピー，回帰問題の場合は分散の減少量が評価基準として用いられる．

例えば，ノード $t$ におけるジニ不純度 $G(t)$ は次の式で表される．

\begin{equation}
	G(t) = 1 - \sum_{k=1}^{K} p_k^2
\end{equation}

ここで，$K$ はクラスの数，$p_k$ はクラス $k$ に属するサンプルの割合を表す．エントロピーは以下のように表される．

\begin{equation}
	H(t) = - \sum_{k=1}^{K} p_k \log p_k
\end{equation}

回帰問題においては，ノード $t$ の分散 $V(t)$ を用いて評価を行う．

\begin{equation}
	V(t) = \frac{1}{N_t} \sum_{i \in t} (y_i - \bar{y}_t)^2
\end{equation}

ここで，$N_t$ はノード $t$ 内のサンプル数，$y_i$ は $i$ 番目の目的変数，$\bar{y}_t$ はノード $t$ の平均値である．


決定木は単体で使用されることも多いが，アンサンブル学習の手法においても重要な役割を果たしている．以下に，決定木と深く関連する手法をいくつか挙げる．

\begin{itemize}
	\item \textbf{Random Forest}: 
	複数の決定木を組み合わせて予測を行う手法である．各決定木は，異なるデータサンプルで学習され，最終的な予測は各木の予測結果の平均または多数決に基づいて行われる．これにより，過学習のリスクを減少させ，高い汎化性能を得ることができる．
	
	\item \textbf{XGBoost}:
	予測の誤りを少しずつ修正しながら，複数の決定木を順番に追加していく手法（ブースティング）に基づいている．最初の木でうまく予測できなかった部分を，次の木が重点的に学習するように工夫されている．XGBoostはこのブースティングを効率よく実行するためのアルゴリズムであり，学習の速さと精度の高さから，さまざまな分野で広く使われている．
	
	\item \textbf{LightGBM}:
	XGBoostと同様にブースティングの考え方に基づくが，特に大量のデータに対して効率的に学習できるように設計されている．一般的な方法では，決定木を上から順に分割していくが，LightGBMでは，より精度が高くなるような葉の部分（木の末端）を優先して分割する方法を採用している．これにより，学習時間を短縮しつつ，高い予測性能を実現している．
\end{itemize}

\subsection*{2.6 CatBoost}
CatBoostは，勾配ブースティング決定木（GBDT）ベースの機械学習ライブラリである．カテゴリデータの処理が得意であり，高精度な予測が可能である．特に欠損値の処理や不均衡データへの対応能力が高いため，BLEのようなノイズの多いデータにも適している．

CatBoostは，決定木の構築過程でカテゴリカル特徴量を最適にエンコードすることで，予測精度を向上させる．また，過学習を抑制する正則化手法や高速な学習アルゴリズムが組み込まれているため，大規模なBLEデータの解析にも適している．

\subsection*{2.7 BLEを用いた人数推定の先行研究}

近年，屋内環境センシングや測位技術において，BLE (Bluetooth Low Energy) を活用した手法が多く提案されている．BLEビーコンを利用したデータ収集は，低消費電力かつ高い拡張性を持つことから，様々な環境モニタリングシステムに適用されている．本研究に関連する既存研究として，BLEを用いた環境センシングおよびデータ解析に関する研究を以下に紹介する．

BLEビーコンの受信信号強度（RSSI: Received Signal Strength Indicator）を利用した空間センシング手法は，多くの研究で検討されてきた．その中でも，室内環境におけるBLEビーコンを用いたデータ収集システムの構築に関する研究が行われており，異なる環境条件下での測定データの取得が試みられている\cite{BLECE-Room_c_202205_yukimat_SeMI}．特に，複数のBLEビーコンを設置することで空間の特徴を捉え，それを解析することで環境の変化を検出する手法が提案されている．

この研究では，BLEビーコンの配置とRSSI値の変動について詳細に分析している．壁や柱などの障害物が信号強度に及ぼす影響を評価し，異なる高さや間隔での設置による信号の安定性を比較することで，最適な配置を検討している．

また，取得したBLEデータのばらつきを抑えるため，移動平均フィルタや外れ値除去を適用し，測定誤差や環境変動の影響を低減している．特に，短期間のRSSI変動を平滑化することで，信号ノイズを軽減し，より安定した環境モニタリングを実現している．


BLEを用いた環境データの解析においては，機械学習を活用した手法の有効性が示されている．特に，決定木を基盤とした手法は，BLEビーコンから取得したデータの特徴量を抽出し，環境変化を捉えるためのモデルとして有望視されている．既存研究では，BLEデータを用いた決定木ベースの解析モデルを構築し，特徴量の選択やモデルの評価を行うことで，その有効性が検討されている \cite{BLECE-Room_c_202205_yukimat_SeMI}．

また，BLE信号の不安定性に対する補正手法や，環境の変動に対するロバスト性を向上させるためのアルゴリズムの開発も進められている．本研究では，これらの手法を踏まえた上で，BLEビーコンデータのより高度な解析を目指す．
